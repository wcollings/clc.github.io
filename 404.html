<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting</title>
  </head>
  <body onload="redirect()">
	<h1 style="text-align: center; padding-top: 50px; display: block;">Redirecting...</h1>
  <p id="demo"></p>
	<script>
    fetch("../dir_struct.json")
    .then(function(response) {
      return response.json();
    })
    .then(function (data) {
      appendData(data);
    })

    function appendData(data)
    {
      var parts=window.location.href.split("/");
      if (!parts[4].endsWith(".html"))
      {
        parts[4]=parts[4].concat("l");
      }
      for (i=0; i < data[parts[3]].length; ++i)
      {
        colsole.log(data[parts[3][i]])
        if (data[parts[3]][i].includes(parts[4]))
        {
          document.getElementById("demo").innerHTML = 
          "I found the page under the album: " + data[parts[3]][i];
        }
      }
    }
		</script>
  </body>
</html>